"use strict";(self.webpackChunkonline_food_court=self.webpackChunkonline_food_court||[]).push([[291],{65291:(e,t,i)=>{i.r(t),i.d(t,{default:()=>F});var n=i(65043),s=i(19252),a=i(96446),r=i(81637),l=i(85865),c=i(35721),o=i(71322),d=i(68903),h=i(17830),x=i(17392),m=i(62167),j=i(39336),y=i(11906),g=i(90035),u=i(26600),p=i(35316),A=i(29347),f=i(85502),b=i(98348),I=i(82322),k=i(67201),v=i(728),C=i(75151),P=i(77154),S=i(78662),D=i(73216),q=i(35475),w=i(98533),z=i(75800),B=i(70579);const E=e=>{let{onClose:t,selectedDishId:i}=e;const[s,a]=(0,n.useState)(null);(0,n.useEffect)((()=>{null!==i&&r()}),[i]);const r=async()=>{try{const e=await P.A.get("".concat(z.y,"/dish/").concat(i));a(e.data)}catch(e){console.error("Error fetching dish details:",e)}};return(0,B.jsx)(w.A,{children:s&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("img",{src:"data:image/jpeg;base64, ".concat(s.image),alt:s.name,style:{width:"100%",marginBottom:"1rem"}}),(0,B.jsxs)(l.A,{variant:"body1",children:[(0,B.jsx)("b",{children:"Price:"})," ",s.discount>0&&(0,B.jsx)(B.Fragment,{children:(0,B.jsx)("del",{style:{marginRight:"0.5rem"},children:"$".concat(s.originalPrice)})}),(0,B.jsx)("span",{children:"$".concat((s.originalPrice*(1-s.discount/100)).toFixed(2))})]}),s.discount>0&&(0,B.jsxs)(l.A,{variant:"body1",children:[(0,B.jsx)("b",{children:"Discount:"})," ","- ".concat(s.discount,"%")]}),(0,B.jsxs)(l.A,{variant:"body1",children:[(0,B.jsx)("b",{children:"Preparation Time:"})," ",s.preparationTime," minutes"]}),(0,B.jsxs)(l.A,{variant:"body1",children:[(0,B.jsx)("b",{children:"Meal Set:"})," ",s.mealSet]})]})})},R=(0,C.A)((()=>({listBasketItem:{display:"block",margin:0,"@media (min-width: 376px)":{display:"inline"}},loadingIcon:{animation:"$spin 1s linear infinite"},"@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}))),F=()=>{const e=(0,S.L4)(),t=(0,S.Kn)();let i=null;t&&(i=t.sub);const C=R(),[w,F]=(0,n.useState)([]),[$,_]=(0,n.useState)(!1),[L,N]=(0,n.useState)(null),[T,W]=(0,n.useState)(!1),[K,M]=(0,n.useState)(null),O=(0,D.Zp)();(0,n.useEffect)((()=>{null===i&&""!==i||Q(i),null!==L&&U()}),[L]);const Q=async t=>{try{const i=await P.A.get("".concat(z.y,"/user/find-by-email"),{params:{email:t},headers:{Authorization:"Bearer ".concat(e)}});i.data&&(console.log("IDDDDDDDDD la: ",i.data.userId),N(i.data.userId))}catch(i){console.error("Error fetching User detail by email:",i)}},U=async()=>{if(!$){_(!0);try{const t=await P.A.get("".concat(z.y,"/basket/basket-item-list/").concat(L),{headers:{Authorization:"Bearer ".concat(e)}});console.log("Basket List: ",t.data),F(t.data)}catch(t){t.response&&404===t.response.status?F([]):alert(t)}finally{_(!1)}}},Z=async(t,i)=>{try{await P.A.put("".concat(z.y,"/basket/update-item-quantity/").concat(t),{quantity:i,userId:L},{headers:{Authorization:"Bearer ".concat(e)}});F(w.map((e=>e.dish.dishId===t?{...e,quantity:i}:e)))}catch(n){console.error("Error updating quantity:",n),alert("Error updating quantity: ".concat(n.message))}},G=async t=>{try{await P.A.delete("".concat(z.y,"/basket/remove-item/").concat(t),{params:{userId:L},headers:{Authorization:"Bearer ".concat(e)}}),F(w.filter((e=>e.dish.dishId!==t))),window.location.reload()}catch(i){console.error("Error deleting item from basket:",i),alert("Error deleting item: ".concat(i.message))}},H=()=>{M(null),W(!1)};return(0,B.jsxs)(s.A,{maxWidth:"lg",children:[(0,B.jsx)(q.N_,{to:"/",style:{display:"flex",justifyContent:"flex-end"},children:(0,B.jsx)(k.A,{sx:{color:"green",fontSize:"3.5rem"}})}),(0,B.jsx)(a.A,{children:$?(0,B.jsx)(r.A,{size:50,sx:{marginLeft:"50%",color:"green"}}):0===w.length?(0,B.jsxs)(l.A,{variant:"h5",sx:{display:"flex",justifyContent:"center"},children:[(0,B.jsx)(I.A,{fontSize:"large",sx:{marginRight:"1rem"}}),"The basket is empty !"]}):(0,B.jsxs)("div",{children:[(0,B.jsx)(c.A,{sx:{mt:2},children:w.map((e=>(0,B.jsxs)("div",{children:[(0,B.jsx)(o.Ay,{alignItems:"flex-start",children:(0,B.jsxs)(d.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,B.jsx)(d.Ay,{item:!0,children:(0,B.jsx)(h.A,{src:"data:image/jpeg;base64, ".concat(e.dish.image),sx:{width:100,height:100,borderRadius:1}})}),(0,B.jsxs)(d.Ay,{item:!0,xs:6,lg:6,children:[(0,B.jsx)(l.A,{component:"span",variant:"h6",color:"textPrimary",sx:{fontWeight:"bold"},children:e.dish.name}),(0,B.jsx)("br",{}),(0,B.jsxs)(l.A,{component:"span",variant:"h6",color:"textPrimary",sx:{marginRight:"1rem"},className:C.listBasketItem,children:["Price:"," ",(0,B.jsxs)("b",{children:[e.dish.discount>0&&(0,B.jsx)(B.Fragment,{children:(0,B.jsx)("del",{style:{marginRight:"0.5rem"},children:"$".concat(e.dish.originalPrice)})}),(0,B.jsx)("span",{children:"$".concat((e.dish.originalPrice*(1-e.dish.discount/100)).toFixed(2))})]})]}),(0,B.jsxs)(l.A,{component:"span",variant:"h6",color:"textPrimary",sx:{marginRight:"1rem"},className:C.listBasketItem,children:["Quantity:"," ",(0,B.jsx)("p",{style:{display:"inline",fontWeight:"bold"},children:e.quantity})]}),(0,B.jsxs)(l.A,{component:"span",variant:"h5",color:"textPrimary",className:C.listBasketItem,children:["Total:"," ",(0,B.jsx)("p",{style:{display:"inline",fontWeight:"bold"},children:"$".concat((e.dish.originalPrice*(1-e.dish.discount/100)*e.quantity).toFixed(2))})]}),(0,B.jsx)("br",{}),(0,B.jsxs)("div",{style:{display:"flex"},children:[(0,B.jsx)(x.A,{sx:{color:e.quantity<=0?"#e7e9eb":"red",paddingLeft:0},disabled:e.quantity<=0,onClick:()=>((e,t)=>{const i=t-1;i<=0?G(e):Z(e,i)})(e.dish.dishId,e.quantity),children:(0,B.jsx)(v.A,{fontSize:"large"})}),(0,B.jsx)(l.A,{variant:"h6",sx:{display:"flex",alignItems:"center"},children:e.quantity}),(0,B.jsx)(x.A,{sx:{color:"rgb(25, 118, 210)"},onClick:()=>{return t=e.dish.dishId,i=e.quantity,void Z(t,i+1);var t,i},children:(0,B.jsx)(k.A,{fontSize:"large"})})]})]}),(0,B.jsxs)(d.Ay,{item:!0,container:!0,xs:12,sm:4,justifyContent:"flex-end",spacing:1,children:[(0,B.jsx)(d.Ay,{item:!0,children:(0,B.jsx)(m.A,{title:"Detail Item",placement:"top",children:(0,B.jsx)(x.A,{edge:"end","aria-label":"details",onClick:()=>{return t=e.dish,M(t),void W(!0);var t},children:(0,B.jsx)(b.A,{fontSize:"large",sx:{color:"#6e7783"}})})})}),(0,B.jsx)(d.Ay,{item:!0,children:(0,B.jsx)(m.A,{title:"Remove Item",placement:"top",children:(0,B.jsx)(x.A,{edge:"end","aria-label":"delete",onClick:()=>G(e.dish.dishId),children:(0,B.jsx)(f.A,{fontSize:"large",sx:{color:"red"}})})})})]})]})}),(0,B.jsx)(j.A,{component:"li"})]},e.dish.dishId)))}),(0,B.jsx)(y.A,{variant:"contained",color:"primary",onClick:()=>{O("/place-order",{state:{list:w}})},disabled:!w||0===w.length,children:"Proceed to Place Order"})]})}),K&&(0,B.jsxs)(g.A,{open:T,onClose:H,children:[(0,B.jsx)(u.A,{children:K.name}),(0,B.jsx)(p.A,{children:(0,B.jsx)(E,{onClose:H,selectedDishId:K.dishId})}),(0,B.jsx)(A.A,{children:(0,B.jsx)(d.Ay,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:(0,B.jsx)(d.Ay,{item:!0,children:(0,B.jsx)(y.A,{variant:"outlined",onClick:H,color:"primary",children:"Close"})})})})]})]})}}}]);
//# sourceMappingURL=291.aa802001.chunk.js.map