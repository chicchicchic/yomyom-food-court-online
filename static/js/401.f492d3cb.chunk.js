"use strict";(self.webpackChunkonline_food_court=self.webpackChunkonline_food_court||[]).push([[401],{20717:(e,a,t)=>{t.r(a),t.d(a,{default:()=>W});var n=t(65043),o=t(75151),s=t(17392),r=t(68903),i=t(15795),c=t(12110),l=t(36591),d=t(26494),g=t(85865),h=t(90035),m=t(26600),u=t(35316),x=t(29347),p=t(11906),j=t(15397),y=t(77154),f=t(36546),A=t(24056),b=t(75800),v=t(70579);const w=e=>{let{handleChangeSelectedCategory:a}=e;const[t,o]=(0,n.useState)([]),[s,r]=(0,n.useState)("MAIN_COURSES");(0,n.useEffect)((()=>{i()}),[]);const i=async()=>{try{const e=await y.A.get("".concat(b.y,"/dish/category-list"));o(e.data)}catch(e){e.response&&404===e.response.status?o([]):console.log("error: ",e)}};return(0,v.jsx)(f.A,{variant:"scrollable",scrollButtons:"auto","aria-label":"category tabs",value:s,onChange:(e,t)=>{r(encodeURIComponent(t)),a(encodeURIComponent(t))},style:{background:"#ffffff",borderBottom:"1px solid #b2b2b2",borderRadius:"4px",paddingTop:"3rem"},sx:{"& .MuiTabScrollButton-root":{color:"#000000"},"& .css-ptiqhd-MuiSvgIcon-root":{width:"2rem",height:"2rem"},"& .MuiTabs-indicator":{backgroundColor:"rgb(124, 3, 3)",width:"50px",height:"3px",borderRadius:"10px"}},children:t.map(((e,a)=>(0,v.jsx)(A.A,{sx:{margin:"auto"},label:e.replace(/_/g," "),value:e,style:{color:"#000000",fontSize:"14px"}},a)))})};var C=t(37948),P=t(53193),S=t(69285),I=t(37970),k=t(59135);const R=(0,o.A)({paginationContainer:{marginTop:"2rem",display:"flex",justifyContent:"center",alignItems:"center"},dropdownRowPerPageLabel:{marginRight:"1rem"},dropdownRowPerPage:{marginRight:"3rem"}}),T=e=>{let{pagination:a,handleRowsPerPageChange:t,handlePageChange:n}=e;const o=R();return(0,v.jsxs)("div",{className:o.paginationContainer,children:[(0,v.jsx)(P.A,{className:o.dropdownRowPerPage,children:(0,v.jsxs)(S.A,{labelId:"rows-per-page-label",id:"rows-per-page",value:a.rowsPerPage,onChange:t,children:[(0,v.jsx)(I.A,{value:8,children:"8"}),(0,v.jsx)(I.A,{value:16,children:"16"}),(0,v.jsx)(I.A,{value:24,children:"24"})]})}),(0,v.jsx)(k.A,{count:a.totalPages,page:a.page,onChange:n,variant:"outlined",shape:"rounded"})]})};var B=t(92382);t(82049),t(69078);const E=(0,o.A)({sliderImage:{height:"200px",maxHeight:"300px",width:"100%","@media (min-width: 376px)":{height:"300px"}}}),N=()=>null,z=e=>{const a=E(),t={dots:!0,infinite:!0,speed:1e3,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:3e3,nextArrow:(0,v.jsx)(N,{}),prevArrow:(0,v.jsx)(N,{})},n=[{name:"e1",image:"".concat("/yomyom-food-court-online","/images/HomePage/IntroEventImages/e1.jpg")},{name:"e2",image:"".concat("/yomyom-food-court-online","/images/HomePage/IntroEventImages/e2.png")},{name:"e3",image:"".concat("/yomyom-food-court-online","/images/HomePage/IntroEventImages/e3.jpg")},{name:"e4",image:"".concat("/yomyom-food-court-online","/images/HomePage/IntroEventImages/e4.jpg")},{name:"e5",image:"".concat("/yomyom-food-court-online","/images/HomePage/IntroEventImages/e5.jpg")}];return(0,v.jsx)("div",{style:{marginBottom:"1rem"},children:(0,v.jsx)(B.A,{...t,children:n&&n.map(((e,t)=>(0,v.jsx)("div",{className:"card card-slider",children:(0,v.jsx)("img",{src:e.image,alt:e.name,className:"".concat(a.sliderImage)})},t)))})})};var F=t(98533);const D=e=>{let{onClose:a,selectedDishId:t}=e;const[o,s]=(0,n.useState)(null);(0,n.useEffect)((()=>{null!==t&&r()}),[t]);const r=async()=>{try{const e=await y.A.get("".concat(b.y,"/dish/").concat(t));s(e.data)}catch(e){console.error("Error fetching dish details:",e)}};return(0,v.jsx)(F.A,{children:o&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("img",{src:"data:image/jpeg;base64, ".concat(o.image),alt:o.name,style:{width:"100%",marginBottom:"1rem"}}),(0,v.jsxs)(g.A,{variant:"body1",children:[(0,v.jsx)("b",{children:"Price:"})," ",o.discount>0&&(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("del",{style:{marginRight:"0.5rem"},children:"$".concat(o.originalPrice)})}),(0,v.jsx)("span",{children:"$".concat((o.originalPrice*(1-o.discount/100)).toFixed(2))})]}),o.discount>0&&(0,v.jsxs)(g.A,{variant:"body1",children:[(0,v.jsx)("b",{children:"Discount:"})," ","- ".concat(o.discount,"%")]}),(0,v.jsxs)(g.A,{variant:"body1",children:[(0,v.jsx)("b",{children:"Preparation Time:"})," ",o.preparationTime," minutes"]}),(0,v.jsxs)(g.A,{variant:"body1",children:[(0,v.jsx)("b",{children:"Meal Set:"})," ",o.mealSet]})]})})};var M=t(67201),H=t(728),L=t(1528),_=t(78662);const U=e=>{let{quantity:a,handleIncrease:t,handleDecrease:n,handleAddToBasket:o,dishPrice:i}=e;const c=(0,_.PX)();return(0,v.jsxs)(r.Ay,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[(0,v.jsx)(r.Ay,{item:!0,children:(0,v.jsx)(s.A,{sx:{color:a<=0?"#e7e9eb":"red",paddingLeft:0},disabled:c&&a<=0,onClick:n,children:(0,v.jsx)(H.A,{fontSize:"large"})})}),(0,v.jsx)(r.Ay,{item:!0,children:(0,v.jsx)(g.A,{variant:"h6",children:a})}),(0,v.jsx)(r.Ay,{item:!0,children:(0,v.jsx)(s.A,{sx:{color:"rgb(25, 118, 210)"},disabled:c,onClick:t,children:(0,v.jsx)(M.A,{fontSize:"large"})})}),(0,v.jsxs)(r.Ay,{item:!0,children:[(0,v.jsx)(p.A,{variant:"contained",sx:{backgroundColor:"#00b14f",padding:"0.5rem 2rem",overflow:"hidden","@media (min-width: 376px)":{padding:"0.5rem 5rem"}},disabled:a<=0,onClick:o,children:(0,v.jsxs)(g.A,{variant:"body1",component:"span",style:{marginRight:"1rem",whiteSpace:"nowrap"},children:["Add to Basket: $",i.toFixed(2)]})}),!c&&a<=0&&(0,v.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,v.jsxs)("p",{style:{display:"flex",alignItems:"center",color:"red"},children:[(0,v.jsx)(L.A,{style:{marginRight:"8px"}}),"You must choose quantity"]})}),c&&(0,v.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,v.jsxs)("p",{style:{display:"flex",alignItems:"center",color:"red"},children:[(0,v.jsx)(L.A,{style:{marginRight:"8px"}}),"You must login to use this action"]})})]})]})};var q=t(74802);const $=(0,o.A)({root:{flexGrow:1,marginLeft:"auto","@media (min-width: 376px)":{padding:"1rem"}},card:{width:"100%",cursor:"pointer",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.05)"}},media:{height:140},mediaWrapper:{position:"relative"},discountTag:{position:"absolute",top:"4px",left:"4px",backgroundColor:"#00b14f",color:"white",padding:"5px 10px",borderRadius:"5px",zIndex:1},filterContainer:{position:"fixed",top:"9.5rem",left:0,width:"100%",zIndex:999,paddingTop:"0"}}),W=()=>{const e=$(),a=(0,_.L4)(),t=(0,_.Kn)();let o=null;t&&(o=t.sub);const[f,A]=(0,n.useState)([]),[P,S]=(0,n.useState)([]),[I,k]=(0,n.useState)(!1),[R,B]=(0,n.useState)({page:1,rowsPerPage:8,totalPages:1}),[E,N]=(0,n.useState)("MAIN_COURSES"),{page:F,rowsPerPage:M}=R,[H,L]=(0,n.useState)(!1),[W,Y]=(0,n.useState)(null),[O,G]=(0,n.useState)(0),[K,X]=(0,n.useState)(null),[J,Q]=n.useState(!1),[V,Z]=(0,n.useState)("Search (name)"),[ee,ae]=(0,n.useState)("");(0,n.useEffect)((()=>{te(),null===o&&""!==o||ne(o)}),[F,M,E,o]);const te=async()=>{if(!I){k(!0);try{const e=await y.A.get("".concat(b.y,"/dish/dishes-by-category?categoryName=").concat(E,"&pageNumber=").concat(R.page-1,"&pageSize=").concat(R.rowsPerPage));A(e.data.content),S(e.data.content);const a=e.data.totalElements,t=Math.ceil(a/R.rowsPerPage);B({...R,totalPages:t})}catch(e){e.response&&404===e.response.status?A([]):alert(e)}finally{k(!1)}}},ne=async e=>{try{const t=await y.A.get("".concat(b.y,"/user/find-by-email"),{params:{email:e},headers:{Authorization:"Bearer ".concat(a)}});t.data&&X(t.data.userId)}catch(t){console.error("Error fetching User detail by email:",t)}},oe=()=>{Y(null),G(0),L(!1)},se=(e,a)=>{"clickaway"!==a&&Q(!1)},re=(0,v.jsx)(n.Fragment,{children:(0,v.jsx)(s.A,{size:"small","aria-label":"close",color:"inherit",onClick:se,children:(0,v.jsx)(q.A,{fontSize:"small"})})});return(0,v.jsxs)("div",{className:e.root,children:[(0,v.jsx)("div",{className:e.filterContainer,children:(0,v.jsx)(w,{handleChangeSelectedCategory:e=>{B({...R,page:1}),N(e)}})}),(0,v.jsx)(z,{}),(0,v.jsx)(r.Ay,{container:!0,justifyContent:"center",children:(0,v.jsx)(r.Ay,{item:!0,xs:12,sm:11,md:11,lg:11,children:(0,v.jsx)(i.A,{label:V,variant:"outlined",fullWidth:!0,margin:"normal",value:ee,onChange:e=>{const a=e.target.value;ae(a);const t=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),n=t(a);""===n&&te();const o=P.filter((e=>t(e.name).includes(n)));A(o);const s=o.length,r=Math.ceil(s/R.rowsPerPage);B({...R,totalPages:r})},onFocus:()=>Z("Search"),onBlur:()=>Z("Search (name)")})})}),(0,v.jsx)("div",{children:I?(0,v.jsx)("h2",{style:{marginTop:"3rem"},children:"Loading..."}):f.length<=0?(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"5rem"},children:[(0,v.jsx)(C.A,{fontSize:"large",style:{marginRight:"10px"}}),(0,v.jsx)("h3",{children:"Have no any dishes in this category"})]}):(0,v.jsx)(r.Ay,{container:!0,spacing:2,sx:{marginTop:"0.5rem"},children:f.map((a=>(0,v.jsx)(r.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,v.jsxs)(c.A,{className:e.card,onClick:()=>(Y(a),G(0),void L(!0)),children:[(0,v.jsxs)("div",{className:e.mediaWrapper,children:[a.discount>0&&(0,v.jsx)("div",{className:e.discountTag,children:"-".concat(a.discount,"%")}),(0,v.jsx)(l.A,{className:e.media,image:"data:image/jpeg;base64, ".concat(a.image),title:a.name})]}),(0,v.jsxs)(d.A,{children:[(0,v.jsx)(g.A,{gutterBottom:!0,variant:"h5",component:"h2",children:a.name}),(0,v.jsxs)(g.A,{variant:"body2",color:"textSecondary",component:"p",children:["Price:"," ",(0,v.jsxs)("b",{children:[a.discount>0&&(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("del",{style:{marginRight:"0.5rem"},children:"$".concat(a.originalPrice)})}),(0,v.jsx)("span",{children:"$".concat((a.originalPrice*(1-a.discount/100)).toFixed(2))})]})]})]})]})},a.dishId)))})}),f.length>0&&(0,v.jsx)(T,{pagination:R,handleRowsPerPageChange:(e,a)=>{B({...R,page:1,rowsPerPage:e.target.value}),ae("")},handlePageChange:(e,a)=>{B({...R,page:a})}}),W&&(0,v.jsxs)(h.A,{open:H,onClose:oe,children:[(0,v.jsx)(m.A,{children:W.name}),(0,v.jsx)(u.A,{children:(0,v.jsx)(D,{onClose:oe,selectedDishId:W.dishId})}),(0,v.jsx)(x.A,{children:(0,v.jsxs)(r.Ay,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[(0,v.jsx)("hr",{style:{width:"100%",height:"1px",backgroundColor:"#e7e9eb",border:"none"}}),(0,v.jsx)(r.Ay,{item:!0,children:(0,v.jsx)(U,{quantity:O,handleIncrease:()=>G(O+1),handleDecrease:()=>{O>0&&G(O-1)},handleAddToBasket:async e=>{e.preventDefault();try{if(!W)throw new Error("No dish selected");if(!K)throw new Error("User ID not found");const e={dishId:W.dishId,quantity:O,createdBy:o,updatedBy:o},t={userId:K,createdBy:o,updatedBy:o,basketItemList:[e]};await y.A.post("".concat(b.y,"/basket/add-item"),t,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}}),oe(),window.location.reload(),Q(!0)}catch(t){console.error("Error adding item to basket:",t),alert("Failed to add item to basket. Please try again later.")}},dishPrice:W.originalPrice*(1-W.discount/100)*O})}),(0,v.jsx)(r.Ay,{item:!0,children:(0,v.jsx)(p.A,{variant:"outlined",onClick:oe,color:"primary",children:"Close"})})]})})]}),(0,v.jsx)(j.A,{open:J,autoHideDuration:6e3,onClose:se,message:"You added the dish to basket successfully !",action:re,sx:{"& .MuiSnackbarContent-root":{backgroundColor:"green",color:"white"}}})]})}}}]);
//# sourceMappingURL=401.f492d3cb.chunk.js.map