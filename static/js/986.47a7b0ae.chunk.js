"use strict";(self.webpackChunkonline_food_court=self.webpackChunkonline_food_court||[]).push([[986],{88946:(e,r,n)=>{n.d(r,{A:()=>c});n(65043);var t=n(53193),a=n(69285),o=n(37970),i=n(59135),s=n(75151),d=n(70579);const l=(0,s.A)({paginationContainer:{marginTop:"2rem",display:"flex",justifyContent:"center",alignItems:"center"},dropdownRowPerPageLabel:{marginRight:"1rem"},dropdownRowPerPage:{marginRight:"3rem"}}),c=e=>{let{pagination:r,handleRowsPerPageChange:n,handlePageChange:s}=e;const c=l();return(0,d.jsxs)("div",{className:c.paginationContainer,children:[(0,d.jsx)(t.A,{className:c.dropdownRowPerPage,children:(0,d.jsxs)(a.A,{labelId:"rows-per-page-label",id:"rows-per-page",value:r.rowsPerPage,onChange:n,children:[(0,d.jsx)(o.A,{value:5,children:"5"}),(0,d.jsx)(o.A,{value:10,children:"10"}),(0,d.jsx)(o.A,{value:20,children:"20"})]})}),(0,d.jsx)(i.A,{count:r.totalPages,page:r.page,onChange:s,variant:"outlined",shape:"rounded"})]})}},47986:(e,r,n)=>{n.r(r),n.d(r,{default:()=>z});var t=n(65043),a=n(78662),o=n(68903),i=n(11906),s=n(15795),d=n(79650),l=n(71806),c=n(84882),h=n(28076),m=n(10039),g=n(73460),x=n(69285),f=n(37970),u=n(36591),A=n(88946),p=n(36244),j=n(35475),y=n(86178),v=n.n(y),w=n(92010),C=n(59343),S=n(77154),P=n(75800),I=n(70579);const z=function(){const e=(0,a.L4)(),[r,n]=(0,t.useState)([]),[y,z]=(0,t.useState)([]),[M,b]=(0,t.useState)(!1),[L,W]=(0,t.useState)({page:1,rowsPerPage:5,totalPages:1}),{page:E,rowsPerPage:N}=L,[R,k]=(0,t.useState)(null),[D,B]=(0,t.useState)("Search (orderID/address/delivery time/phone/created by)"),[T,O]=(0,t.useState)("");(0,t.useEffect)((()=>{F(),H()}),[E,N,e]);const H=async()=>{b(!0);try{const r=await S.A.get("".concat(P.y,"/order-management/order-list?pageNumber=").concat(L.page-1,"&pageSize=").concat(L.rowsPerPage),{headers:{Authorization:"Bearer ".concat(e)}});n(r.data.content);const t=r.data.totalElements,a=Math.ceil(t/L.rowsPerPage);W({...L,totalPages:a})}catch(r){r.response&&404===r.response.status?n([]):alert(r)}finally{b(!1)}},F=async()=>{try{const r=await S.A.get("".concat(P.y,"/order-management/order-item-status-list"),{headers:{Authorization:"Bearer ".concat(e)}});z(r.data)}catch(r){r.response&&404===r.response.status?z([]):alert(r)}},Y=async r=>{try{await S.A.put("".concat(P.y,"/order-management/update-order-status/").concat(r),null,{params:{newStatus:"COMPLETED",isDeleted:!0},headers:{Authorization:"Bearer ".concat(e)}}),window.location.reload()}catch(n){alert(n)}},_=r.filter((e=>e.orderId.toString().toLowerCase().includes(T.toLowerCase())||e.address.toLowerCase().includes(T.toLowerCase())||e.deliveryTime.toLowerCase().includes(T.toLowerCase())||e.phone.toLowerCase().includes(T.toLowerCase())||e.createdBy.toLowerCase().includes(T.toLowerCase())));return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(o.Ay,{container:!0,justifyContent:"flex-end",children:(0,I.jsx)(o.Ay,{item:!0,children:(0,I.jsx)(j.N_,{to:"/order-management/trash-order-list",children:(0,I.jsxs)(i.A,{variant:"contained",sx:{backgroundColor:"#000000",marginBottom:"1rem",marginRight:"1rem"},children:[(0,I.jsx)(p.A,{sx:{marginRight:"4px",fontSize:"24px"}}),"Trash"]})})})}),(0,I.jsx)(o.Ay,{container:!0,justifyContent:"center",children:(0,I.jsx)(o.Ay,{item:!0,xs:12,sm:11,md:11,lg:11,children:(0,I.jsx)(s.A,{label:D,variant:"outlined",fullWidth:!0,margin:"normal",value:T,onChange:e=>O(e.target.value),onFocus:()=>B("Search"),onBlur:()=>B("Search (orderID/address/delivery time/phone/created by)"),sx:{marginBottom:"2rem"}})})}),M?(0,I.jsx)("h1",{children:"Loading..."}):(0,I.jsx)(d.A,{style:{maxHeight:"350px",overflowY:"auto"},children:(0,I.jsxs)(l.A,{className:"border shadow",children:[(0,I.jsx)(c.A,{sx:{backgroundColor:"#000000"},children:(0,I.jsxs)(h.A,{children:[(0,I.jsx)(m.A,{align:"center",sx:{color:"#ffffff"}}),(0,I.jsx)(m.A,{align:"center",sx:{color:"#ffffff"},children:"Order ID"}),(0,I.jsx)(m.A,{align:"center",sx:{color:"#ffffff"},children:"Status"}),(0,I.jsx)(m.A,{align:"center",sx:{color:"#ffffff"},children:"Delivery Time"}),(0,I.jsx)(m.A,{align:"center",sx:{color:"#ffffff"},children:"Address"}),(0,I.jsx)(m.A,{align:"center",sx:{color:"#ffffff"},children:"Total Payment"}),(0,I.jsx)(m.A,{align:"center",sx:{color:"#ffffff"},children:"Notes"}),(0,I.jsx)(m.A,{align:"center",sx:{color:"#ffffff"},children:"Payment Method"}),(0,I.jsx)(m.A,{align:"center",sx:{color:"#ffffff"},children:"Delivery Phone Number"}),(0,I.jsx)(m.A,{align:"center",sx:{color:"#ffffff"},children:"Ordered At"}),(0,I.jsx)(m.A,{align:"center",sx:{color:"#ffffff"},children:"Ordered By"})]})}),0===_.length?(0,I.jsx)(g.A,{children:(0,I.jsx)(h.A,{children:(0,I.jsx)(m.A,{colSpan:10,align:"center",style:{fontSize:"14px"},children:"(Have no any record founded!)"})})}):(0,I.jsx)(g.A,{children:_.map(((r,t)=>(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(h.A,{children:[(0,I.jsx)(m.A,{align:"center",style:{minWidth:100},children:(0,I.jsx)(i.A,{onClick:()=>{return e=r.orderId,void k(R===e?null:e);var e},children:R===r.orderId?(0,I.jsx)(w.A,{}):(0,I.jsx)(C.A,{sx:{color:"green"}})})}),(0,I.jsx)(m.A,{align:"center",style:{fontSize:"14px",minWidth:70},children:r.orderId}),(0,I.jsx)(m.A,{align:"center",style:{fontSize:"14px",minWidth:100},children:r.orderStatusEnum}),(0,I.jsx)(m.A,{align:"center",style:{fontSize:"14px",minWidth:200},children:r.deliveryTime}),(0,I.jsx)(m.A,{align:"center",style:{fontSize:"14px",minWidth:200},children:r.address}),(0,I.jsxs)(m.A,{align:"center",style:{fontSize:"14px",minWidth:200},children:["$",r.totalPayment]}),(0,I.jsx)(m.A,{align:"center",style:{fontSize:"14px",minWidth:200},children:r.notes||"-"}),(0,I.jsx)(m.A,{align:"center",style:{fontSize:"14px",minWidth:200},children:r.paymentMethod}),(0,I.jsx)(m.A,{align:"center",style:{fontSize:"14px",minWidth:100},children:r.phone}),(0,I.jsx)(m.A,{align:"center",style:{fontSize:"14px",minWidth:300},children:v()(r.createdAt).format("MMMM Do YYYY, h:mm:ss a")}),(0,I.jsx)(m.A,{align:"center",style:{fontSize:"14px",minWidth:200},children:r.createdBy})]},r.orderId),R===r.orderId&&(0,I.jsx)(h.A,{children:(0,I.jsx)(m.A,{colSpan:12,children:(0,I.jsxs)(l.A,{children:[(0,I.jsx)(c.A,{children:(0,I.jsxs)(h.A,{children:[(0,I.jsx)(m.A,{align:"center",sx:{border:"none",padding:0}}),(0,I.jsx)(m.A,{align:"center",sx:{fontWeight:600},children:"No."}),(0,I.jsx)(m.A,{align:"center",sx:{fontWeight:600},children:"Status"}),(0,I.jsx)(m.A,{align:"center",sx:{fontWeight:600},children:"Item Name"}),(0,I.jsx)(m.A,{align:"center",sx:{fontWeight:600},children:"Image"}),(0,I.jsx)(m.A,{align:"center",sx:{fontWeight:600},children:"Quantity"}),(0,I.jsx)(m.A,{align:"center",sx:{fontWeight:600},children:"Total Price"})]})}),(0,I.jsx)(g.A,{children:r.orderItems.map(((t,a)=>(0,I.jsxs)(h.A,{children:[0===a&&(0,I.jsx)(m.A,{align:"center",rowSpan:r.orderItems.length,sx:{border:"none"}}),(0,I.jsx)(m.A,{align:"center",children:a+1}),(0,I.jsx)(m.A,{align:"center",children:(0,I.jsx)(x.A,{value:t.orderItemStatusEnum,onChange:a=>(async(r,t,a)=>{const o=r.target.value;try{await S.A.put("".concat(P.y,"/order-management/update-order-item-status/").concat(a),null,{params:{newStatus:o},headers:{Authorization:"Bearer ".concat(e)}}),n((e=>e.map((e=>{if(e.orderId===t){const r=e.orderItems.map((e=>e.orderItemId===a?{...e,orderItemStatusEnum:o}:e));return r.every((e=>"CANCELLED"===e.orderItemStatusEnum||"COMPLETED"===e.orderItemStatusEnum))?(Y(t),{...e,orderItems:r,orderStatusEnum:"COMPLETE",deleted:!0}):{...e,orderItems:r}}return e}))))}catch(i){alert(i)}})(a,r.orderId,t.orderItemId),displayEmpty:!0,sx:{width:"12rem"},children:y.map(((e,r)=>(0,I.jsx)(f.A,{value:e,children:e},r)))})}),(0,I.jsx)(m.A,{align:"center",children:t.dishName}),(0,I.jsx)(m.A,{align:"center",style:{fontSize:"14px",maxWidth:50},children:(0,I.jsx)(u.A,{component:"img",height:"100",width:"100",src:"data:image/jpeg;base64, ".concat(t.dishImage),alt:t.dishName,style:{objectFit:"fill"}})}),(0,I.jsx)(m.A,{align:"center",children:t.quantity}),(0,I.jsxs)(m.A,{align:"center",children:["$",t.totalPrice]})]},t.orderItemId)))})]})})})]})))})]})}),(0,I.jsx)(A.A,{pagination:L,handleRowsPerPageChange:(e,r)=>{W({...L,page:1,rowsPerPage:e.target.value})},handlePageChange:(e,r)=>{W({...L,page:r})}})]})}},59343:(e,r,n)=>{var t=n(24994);r.A=void 0;var a=t(n(40039)),o=n(70579);r.A=(0,a.default)((0,o.jsx)("path",{d:"M12 4c4.41 0 8 3.59 8 8s-3.59 8-8 8-8-3.59-8-8 3.59-8 8-8m0-2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 10V8h-2v4H8l4 4 4-4z"}),"ArrowCircleDown")},92010:(e,r,n)=>{var t=n(24994);r.A=void 0;var a=t(n(40039)),o=n(70579);r.A=(0,a.default)((0,o.jsx)("path",{d:"M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0 2c5.52 0 10-4.48 10-10S17.52 2 12 2 2 6.48 2 12s4.48 10 10 10m-1-10v4h2v-4h3l-4-4-4 4z"}),"ArrowCircleUp")},36244:(e,r,n)=>{var t=n(24994);r.A=void 0;var a=t(n(40039)),o=n(70579);r.A=(0,a.default)((0,o.jsx)("path",{d:"M5.77 7.15 7.2 4.78l1.03-1.71c.39-.65 1.33-.65 1.72 0l1.48 2.46-1.23 2.06-1 1.62zm15.95 5.82-1.6-2.66-3.46 2L18.87 16H20c.76 0 1.45-.43 1.79-1.11.14-.28.21-.58.21-.89 0-.36-.1-.71-.28-1.03M16 21h1.5c.76 0 1.45-.43 1.79-1.11L20.74 17H16v-2l-4 4 4 4zm-6-4H5.7l-.84 1.41c-.3.5-.32 1.12-.06 1.65.28.57.87.94 1.52.94H10zm-3.88-2.65 1.73 1.04L6.48 9.9 1 11.27l1.7 1.02-.41.69c-.35.59-.38 1.31-.07 1.92l1.63 3.26zm10.9-9.21-1.3-2.17C15.35 2.37 14.7 2 14 2h-3.53l3.12 5.2-1.72 1.03 5.49 1.37 1.37-5.49z"}),"Recycling")},36591:(e,r,n)=>{n.d(r,{A:()=>p});var t=n(98587),a=n(58168),o=n(65043),i=n(58387),s=n(68606),d=n(72876),l=n(34535),c=n(57056),h=n(32400);function m(e){return(0,h.Ay)("MuiCardMedia",e)}(0,c.A)("MuiCardMedia",["root","media","img"]);var g=n(70579);const x=["children","className","component","image","src","style"],f=(0,l.Ay)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:n}=e,{isMediaComponent:t,isImageComponent:a}=n;return[r.root,t&&r.media,a&&r.img]}})((e=>{let{ownerState:r}=e;return(0,a.A)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},r.isMediaComponent&&{width:"100%"},r.isImageComponent&&{objectFit:"cover"})})),u=["video","audio","picture","iframe","img"],A=["picture","img"],p=o.forwardRef((function(e,r){const n=(0,d.A)({props:e,name:"MuiCardMedia"}),{children:o,className:l,component:c="div",image:h,src:p,style:j}=n,y=(0,t.A)(n,x),v=-1!==u.indexOf(c),w=!v&&h?(0,a.A)({backgroundImage:'url("'.concat(h,'")')},j):j,C=(0,a.A)({},n,{component:c,isMediaComponent:v,isImageComponent:-1!==A.indexOf(c)}),S=(e=>{const{classes:r,isMediaComponent:n,isImageComponent:t}=e,a={root:["root",n&&"media",t&&"img"]};return(0,s.A)(a,m,r)})(C);return(0,g.jsx)(f,(0,a.A)({className:(0,i.A)(S.root,l),as:c,role:!v&&h?"img":void 0,ref:r,style:w,ownerState:C,src:v?h||p:void 0},y,{children:o}))}))}}]);
//# sourceMappingURL=986.47a7b0ae.chunk.js.map